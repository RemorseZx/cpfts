-- MOBILE + PC AIMBOT (No ESP, No GUI, Smoothing = 1)
-- Put in StarterPlayerScripts or execute in your executor

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

local aiming = false
local fovRadius = 150
local smoothing = 1

local lastInputPos = Vector2.new(0, 0)

-- FOV CIRCLE
local fovCircle = Drawing.new("Circle")
fovCircle.Thickness = 1
fovCircle.NumSides = 100
fovCircle.Filled = false
fovCircle.Transparency = 1
fovCircle.Color = Color3.fromRGB(255, 0, 0)
fovCircle.Visible = true
fovCircle.Radius = fovRadius

-- Update touch/mouse position
UIS.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        lastInputPos = Vector2.new(input.Position.X, input.Position.Y)
    end
end)

-- PC: Right click hold to aim
UIS.InputBegan:Connect(function(input, gp)
    if not gp and input.UserInputType == Enum.UserInputType.MouseButton2 then
        aiming = true
    end
end)

UIS.InputEnded:Connect(function(input, gp)
    if not gp and input.UserInputType == Enum.UserInputType.MouseButton2 then
        aiming = false
    end
end)

-- MOBILE: Touch hold anywhere to aim
UIS.TouchStarted:Connect(function()
    aiming = true
end)

UIS.TouchEnded:Connect(function()
    aiming = false
end)

local function getClosestTarget()
    local mousePos = lastInputPos
    local closest = nil
    local closestDist = math.huge

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
            local head = player.Character.Head
            local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
            if humanoid and humanoid.Health > 0 then
                local pos, onScreen = Camera:WorldToViewportPoint(head.Position)
                if onScreen then
                    local dist = (Vector2.new(pos.X, pos.Y) - mousePos).Magnitude
                    if dist < closestDist and dist < fovRadius then
                        closestDist = dist
                        closest = head
                    end
                end
            end
        end
    end

    return closest
end

local function aimAt(target)
    if not target then return end
    local camPos = Camera.CFrame.Position
    local newCF = CFrame.new(camPos, target.Position)
    -- smoothing = 1 is instant lock
    Camera.CFrame = Camera.CFrame:Lerp(newCF, 1)
end

RunService.RenderStepped:Connect(function()
    fovCircle.Position = lastInputPos

    if aiming then
        local target = getClosestTarget()
        if target then
            aimAt(target)
        end
    end
end)
